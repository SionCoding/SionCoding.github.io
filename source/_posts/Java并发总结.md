title: Java 并发总结
author: Sion
tags:
  - Java 并发
categories:
  - 技术
date: 2019-08-05 17:18:00
---
### 1. 进程和线程是什么

#### 1.1. 什么是进程

进程是程序的一次执行过程，是系统运行程序的基本单位。

#### 1.2. 什么是线程

线程是比进程更小的执行单位，一个进程在其执行过程中可以产生多个线程，与进程不同的是同类的多个线程共享**堆**和**方法区**资源，但每个线程有自己的**程序计数器**、**虚拟机栈**和**本地方法栈**，所以系统在产生一个线程，或在各个线程之间切换工作时，负担要比进程小的多。

<!-- more -->

### 2. 请简要描述线程与进程的关系,区别及优缺点？

**从 JVM 角度说进程和线程之间的关系**

#### 2.1. 线程和进程的关系

一个进程可以有多个线程，多个线程共享堆和方法区，每条线程有自己**的程序计数器**、**虚拟机栈**和**本地方法栈**

#### 2.2. 程序计数器为什么是私有的

程序计数器有下面两个作用：
1. 字节码解释器通过改变程序计数器来依次读取指令，从而实现代码的流程控制，如：顺序执行、异常处理、选择、循环
2. 在多线程的情况下，记录当前线程执行的位置，从而当线程切换回来的时候能知道该线程上次执行到哪

#### 2.3. 虚拟机栈和本地方法栈为什么是私有的

- 虚拟机栈：每个方法在执行的同时会创建一个栈帧用于存储局部变量表、操作数栈、常量池引用等信息。从方法调用到完成的过程对应一个栈帧在虚拟机栈中入栈出栈的过程
- 本地方法栈：与虚拟机栈所发挥的作用非常类似，区别是：虚拟机栈为虚拟机执行Java方法服务，而本地方法栈则为虚拟机使用到的Native方法服务。在HotSpot虚拟机中和Java虚拟机栈合二为一

#### 2.4. 堆和方法区

堆和方法区是所有线程共享的资源，其中堆是进程中最大的一块内存，主要用于存放新创建的对象（所有对象都在这里分配内存），方法区主要用于存放已被加载的类信息、常量、静态变量、即时编译器编译后的代码等数据

#### 2.5. 并发和并行的区别

- 并发：同一时间段内，多个线程都在执行
- 并行：单位时间内，多个线程同时执行

















