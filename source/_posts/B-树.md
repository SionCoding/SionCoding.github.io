title: B+树
author: Sion
tags:
  - 数据结构
categories:
  - 技术
date: 2019-08-02 09:55:00
---
### B+树与二叉搜索树、二叉平衡树区别：
- 使用多叉而不是二叉了
- 每个节点不是只存储一个key了，可以存储多个key
- 非叶子节点只存储key，叶子结点存储key和数据
- 叶子节点两两相连为顺序查询提供帮助

<!-- more -->

### MySQL为什么选择B+树
- B+树的非叶子节点只存储key，占用空间非常小，每一层能索引到的数据范围非常广，即每次IO操作可以观看更多的数据
- 叶子节点两两相连，符合磁盘的预读特性
- 支持范围查询，并且范围查询非常高效，因为数据都存储在叶子节点且叶子结点两两相连，并且有指针指向其他叶子结点，范围查询无需整棵树遍历

### InnoDB存储引擎

#### 自增主键索引
自增主键索引就是使用了B+树，索引文件同时也是数据文件，存储了整张表的数据。也就是说，平时我们执行sql按照主键查询的时候，只需要从这个索引文件获取数据即可。这种索引也叫聚集索引。原因是所有数据都是按照主键索引的。

#### 辅助索引（非自增主键索引，也叫非聚集索引）
这种索引文件的叶子节点存储了键值和书签。键值说的就是列的值，书签就是对应记录的主键的值，如果按照某个辅助索引来查询数据的时候，如果没有用到覆盖索引，那么就得分两步走：
- 先从辅助索引文件中获取到数据对应的主键
- 根据主键从聚集索引中获取真实数据

#### MyISAM存储引擎
MyISAM引擎使用B+Tree作为索引结构，叶节点的data域存放的是数据记录的地址。这种称为非聚集索引,这个命名其实是对应上面innodb的叫法